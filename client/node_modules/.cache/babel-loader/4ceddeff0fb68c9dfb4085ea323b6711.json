{"ast":null,"code":"var _jsxFileName = \"/Users/karthikdechiraju/Developer/contacts/client/src/components/table.js\";\nimport React, { useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableContainer from \"@material-ui/core/TableContainer\";\nimport TablePagination from \"@material-ui/core/TablePagination\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Paper from \"@material-ui/core/Paper\";\nimport TableHeadComponent from \"../components/tableHead\";\nimport { getContacts, createContact, updateContact, deleteContact } from '../utils/httpUtils';\nimport { dateModifier } from \"../utils/dateModifier\";\nimport LongMenu from '../components/floatingMenu';\nimport EditModal from \"./modal\";\nimport AddIcon from '@material-ui/icons/Add';\nimport Fab from '@material-ui/core/Fab';\nimport { Snackbar } from '../components/snackbar';\n\nfunction descendingComparator(a, b, orderBy) {\n  if (b[orderBy] < a[orderBy]) {\n    return -1;\n  }\n\n  if (b[orderBy] > a[orderBy]) {\n    return 1;\n  }\n\n  return 0;\n}\n\nfunction getComparator(order, orderBy) {\n  return order === \"desc\" ? (a, b) => descendingComparator(a, b, orderBy) : (a, b) => -descendingComparator(a, b, orderBy);\n}\n\nfunction stableSort(array, comparator) {\n  const stabilizedThis = array.map((el, index) => [el, index]);\n  stabilizedThis.sort((a, b) => {\n    const order = comparator(a[0], b[0]);\n    if (order !== 0) return order;\n    return a[1] - b[1];\n  });\n  return stabilizedThis.map(el => el[0]);\n}\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: \"100%\",\n    marginBottom: 100\n  },\n  paper: {\n    width: \"100%\",\n    marginBottom: theme.spacing(2)\n  },\n  table: {\n    minWidth: 750\n  },\n  visuallyHidden: {\n    border: 0,\n    clip: \"rect(0 0 0 0)\",\n    height: 1,\n    margin: -1,\n    overflow: \"hidden\",\n    padding: 0,\n    position: \"absolute\",\n    top: 20,\n    width: 1\n  }\n}));\nconst rowsPerPage = 10;\n\nconst ContactsTable = props => {\n  const classes = useStyles();\n  const [order, setOrder] = React.useState(\"asc\");\n  const [orderBy, setOrderBy] = React.useState(\"calories\");\n  const [page, setPage] = React.useState(0);\n  const [rows, setRows] = React.useState([]);\n  const [data, setData] = React.useState([]);\n  const [isModalVisible, setModalVisibility] = React.useState(false);\n  const [activeContact, setActiveContact] = React.useState(null);\n  const [error, setError] = React.useState({\n    isError: false,\n    message: \"\"\n  });\n  useEffect(() => {\n    getContacts().then(res => {\n      setRows(res.data.data);\n      setData(res.data.data);\n    });\n  }, []);\n  useEffect(() => {\n    if (props.search !== \"\") {\n      let newRows = rows.filter(item => item.name.includes(props.search) || item.email.includes(props.search));\n      setRows(newRows);\n    } else {\n      setRows(data);\n    }\n  }, [props.search, data]);\n\n  const handleRequestSort = (event, property) => {\n    const isAsc = orderBy === property && order === \"asc\";\n    setOrder(isAsc ? \"desc\" : \"asc\");\n    setOrderBy(property);\n  };\n\n  const handleChangePage = (event, newPage) => {\n    setPage(newPage);\n  };\n\n  const onEdit = data => {\n    setActiveContact(data);\n    setModalVisibility(true);\n  };\n\n  const showSnackBar = (isError, message) => {\n    setError({\n      isError,\n      message\n    });\n    setTimeout(() => {\n      setError({\n        isError: false,\n        message: \"\"\n      });\n    }, 5000);\n  };\n\n  const onDelete = data => {\n    deleteContact(data._id).then(res => {\n      let newRows = rows.filter(item => item._id !== data._id);\n      setRows(newRows);\n      showSnackBar(false, \"contact deleted successfully\");\n    }).catch(e => {\n      showSnackBar(true, e.response && e.response.data && e.response.data.error ? e.response.data.error : \"Something went wrong\");\n    });\n  };\n\n  const handleSubmit = data => {\n    if (activeContact) {\n      // update\n      updateContact(data).then(res => {\n        let newRows = rows.map(item => {\n          if (item._id === data._id) {\n            return res.data.data;\n          } else {\n            return item;\n          }\n        });\n        setRows(newRows);\n        setActiveContact(null);\n        setModalVisibility(false);\n        showSnackBar(false, \"contact updated successfully\");\n      }).catch(e => {\n        setActiveContact(null);\n        setModalVisibility(false);\n        showSnackBar(true, e.response && e.response.data && e.response.data.error ? e.response.data.error : \"Something went wrong\");\n      });\n    } else {\n      // create\n      createContact(data).then(res => {\n        let newRows = [res.data.data, ...rows];\n        setRows(newRows);\n        setActiveContact(null);\n        setModalVisibility(false);\n        showSnackBar(false, \"contact created successfully\");\n      }).catch(e => {\n        showSnackBar(true, e.response && e.response.data && e.response.data.error ? e.response.data.error : \"Something went wrong\");\n        setActiveContact(null);\n        setModalVisibility(false);\n      });\n    }\n  }; // const emptyRows = rowsPerPage - Math.min(rowsPerPage, rows.length - page * rowsPerPage);\n\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Snackbar, {\n    isError: error.isError,\n    message: error.message,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Paper, {\n    className: classes.paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TableContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    className: classes.table,\n    \"aria-labelledby\": \"tableTitle\",\n    size: \"medium\",\n    \"aria-label\": \"enhanced table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(TableHeadComponent, {\n    classes: classes,\n    order: order,\n    orderBy: orderBy,\n    onRequestSort: handleRequestSort,\n    rowCount: rows.length,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(TableBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 25\n    }\n  }, stableSort(rows, getComparator(order, orderBy)).slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map(row => {\n    return /*#__PURE__*/React.createElement(TableRow, {\n      hover: true,\n      tabIndex: -1,\n      key: row.name,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 45\n      }\n    }, row.name), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 45\n      }\n    }, row.email), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 45\n      }\n    }, row.country_code), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 45\n      }\n    }, dateModifier(row.created_at)), /*#__PURE__*/React.createElement(TableCell, {\n      style: {\n        display: \"flex\",\n        flexDirection: \"row\",\n        justifyContent: \"space-between\",\n        alignItems: \"center\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 45\n      }\n    }, dateModifier(row.updated_at), /*#__PURE__*/React.createElement(LongMenu, {\n      onDelete: onDelete,\n      onEdit: onEdit,\n      data: row,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 49\n      }\n    })));\n  })))), /*#__PURE__*/React.createElement(TablePagination, {\n    rowsPerPageOptions: [10],\n    component: \"div\",\n    count: rows.length,\n    rowsPerPage: rowsPerPage,\n    page: page,\n    onChangePage: handleChangePage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(EditModal, {\n    open: isModalVisible,\n    data: activeContact,\n    handleClose: () => {\n      setModalVisibility(false);\n      setActiveContact(null);\n    },\n    handleSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      position: \"fixed\",\n      zIndex: 9999,\n      bottom: 30,\n      right: 30\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Fab, {\n    color: \"primary\",\n    \"aria-label\": \"add\",\n    onClick: () => setModalVisibility(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(AddIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 21\n    }\n  }))));\n};\n\nexport default ContactsTable;","map":{"version":3,"sources":["/Users/karthikdechiraju/Developer/contacts/client/src/components/table.js"],"names":["React","useEffect","makeStyles","Table","TableBody","TableCell","TableContainer","TablePagination","TableRow","Paper","TableHeadComponent","getContacts","createContact","updateContact","deleteContact","dateModifier","LongMenu","EditModal","AddIcon","Fab","Snackbar","descendingComparator","a","b","orderBy","getComparator","order","stableSort","array","comparator","stabilizedThis","map","el","index","sort","useStyles","theme","root","width","marginBottom","paper","spacing","table","minWidth","visuallyHidden","border","clip","height","margin","overflow","padding","position","top","rowsPerPage","ContactsTable","props","classes","setOrder","useState","setOrderBy","page","setPage","rows","setRows","data","setData","isModalVisible","setModalVisibility","activeContact","setActiveContact","error","setError","isError","message","then","res","search","newRows","filter","item","name","includes","email","handleRequestSort","event","property","isAsc","handleChangePage","newPage","onEdit","showSnackBar","setTimeout","onDelete","_id","catch","e","response","handleSubmit","length","slice","row","country_code","created_at","display","flexDirection","justifyContent","alignItems","updated_at","zIndex","bottom","right"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableContainer from \"@material-ui/core/TableContainer\";\nimport TablePagination from \"@material-ui/core/TablePagination\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Paper from \"@material-ui/core/Paper\";\nimport TableHeadComponent from \"../components/tableHead\";\nimport { getContacts, createContact, updateContact, deleteContact } from '../utils/httpUtils'\nimport { dateModifier } from \"../utils/dateModifier\";\nimport LongMenu from '../components/floatingMenu'\nimport EditModal from \"./modal\";\nimport AddIcon from '@material-ui/icons/Add';\nimport Fab from '@material-ui/core/Fab';\nimport { Snackbar } from '../components/snackbar'\n\n\n\n\nfunction descendingComparator(a, b, orderBy) {\n    if (b[orderBy] < a[orderBy]) {\n        return -1;\n    }\n    if (b[orderBy] > a[orderBy]) {\n        return 1;\n    }\n    return 0;\n}\n\nfunction getComparator(order, orderBy) {\n    return order === \"desc\" ? (a, b) => descendingComparator(a, b, orderBy) : (a, b) => -descendingComparator(a, b, orderBy);\n}\n\nfunction stableSort(array, comparator) {\n    const stabilizedThis = array.map((el, index) => [el, index]);\n    stabilizedThis.sort((a, b) => {\n        const order = comparator(a[0], b[0]);\n        if (order !== 0) return order;\n        return a[1] - b[1];\n    });\n    return stabilizedThis.map((el) => el[0]);\n}\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: \"100%\",\n        marginBottom: 100\n    },\n    paper: {\n        width: \"100%\",\n        marginBottom: theme.spacing(2),\n    },\n    table: {\n        minWidth: 750,\n    },\n    visuallyHidden: {\n        border: 0,\n        clip: \"rect(0 0 0 0)\",\n        height: 1,\n        margin: -1,\n        overflow: \"hidden\",\n        padding: 0,\n        position: \"absolute\",\n        top: 20,\n        width: 1,\n    },\n}));\n\nconst rowsPerPage = 10\n\nconst ContactsTable = (props) => {\n    \n    const classes = useStyles();\n    const [order, setOrder] = React.useState(\"asc\");\n    const [orderBy, setOrderBy] = React.useState(\"calories\");\n    const [page, setPage] = React.useState(0);\n    const [rows, setRows] = React.useState([])\n    const [data, setData] = React.useState([])\n    const [isModalVisible, setModalVisibility] = React.useState(false)\n    const [activeContact, setActiveContact] = React.useState(null)\n    const [error, setError] = React.useState({\n        isError: false,\n        message: \"\"\n    })\n    \n    \n    useEffect(() => {\n        getContacts().then(res => {\n            setRows(res.data.data)\n            setData(res.data.data)\n        })\n    },[]);\n\n    useEffect(()=>{\n        if(props.search !== \"\"){\n            let newRows = rows.filter(item => item.name.includes(props.search) || item.email.includes(props.search))\n            setRows(newRows)\n        }else{\n            setRows(data)\n        }\n    },[props.search,data])\n\n    const handleRequestSort = (event, property) => {\n        const isAsc = orderBy === property && order === \"asc\";\n        setOrder(isAsc ? \"desc\" : \"asc\");\n        setOrderBy(property);\n    };\n\n\n    const handleChangePage = (event, newPage) => {\n        setPage(newPage);\n    };\n\n    const onEdit = (data) => {\n        setActiveContact(data)\n        setModalVisibility(true)\n    }\n\n\n    const showSnackBar = (isError, message) => {\n        setError({\n            isError,\n            message\n        })\n        setTimeout(()=>{\n            setError({\n                isError: false,\n                message: \"\"\n            })\n        },5000)\n    }\n\n    const onDelete = (data) => {\n        deleteContact(data._id).then(res=>{\n            let newRows = rows.filter(item => item._id !== data._id)\n            setRows(newRows)\n            showSnackBar(false,\"contact deleted successfully\")\n        }).catch(e =>{\n            showSnackBar(true,e.response && e.response.data && e.response.data.error ? e.response.data.error : \"Something went wrong\")\n        })\n    }\n\n\n    const handleSubmit = (data) => {\n        if(activeContact){\n            // update\n            updateContact(data).then(res => {\n                let newRows = rows.map(item => {\n                    if(item._id === data._id){\n                        return res.data.data\n                    }else{\n                        return item\n                    }\n                })\n                setRows(newRows)\n                setActiveContact(null)\n                setModalVisibility(false)\n                showSnackBar(false,\"contact updated successfully\")\n            }).catch(e => {\n                setActiveContact(null)\n                setModalVisibility(false)\n                showSnackBar(true,e.response && e.response.data && e.response.data.error ? e.response.data.error : \"Something went wrong\")\n            })\n        }else{\n            // create\n            createContact(data).then(res => {\n                let newRows = [res.data.data,...rows]\n                setRows(newRows)\n                setActiveContact(null)\n                setModalVisibility(false)\n                showSnackBar(false,\"contact created successfully\")\n            }).catch(e => {\n                showSnackBar(true,e.response && e.response.data && e.response.data.error ? e.response.data.error : \"Something went wrong\")\n                setActiveContact(null)\n                setModalVisibility(false)\n            })\n        }\n    }\n    // const emptyRows = rowsPerPage - Math.min(rowsPerPage, rows.length - page * rowsPerPage);\n    return (\n        <div className={classes.root}>\n            <Snackbar isError={error.isError} message={error.message} />\n            <Paper className={classes.paper}>\n                <TableContainer>\n                    <Table\n                        className={classes.table}\n                        aria-labelledby=\"tableTitle\"\n                        size={\"medium\"}\n                        aria-label=\"enhanced table\"\n                    >\n                        <TableHeadComponent\n                            classes={classes}\n                            order={order}\n                            orderBy={orderBy}\n                            onRequestSort={handleRequestSort}\n                            rowCount={rows.length}\n                        />\n                        <TableBody>\n                            {stableSort(rows, getComparator(order, orderBy))\n                                .slice( page * rowsPerPage, page * rowsPerPage + rowsPerPage )\n                                .map(row => {\n                                    return (\n                                        <TableRow hover tabIndex={-1} key={row.name} >\n                                            <TableCell>{row.name}</TableCell>\n                                            <TableCell>{row.email}</TableCell>\n                                            <TableCell >{row.country_code}</TableCell>\n                                            <TableCell >{dateModifier(row.created_at)}</TableCell>\n                                            <TableCell style={{\n                                                display: \"flex\",\n                                                flexDirection: \"row\",\n                                                justifyContent: \"space-between\",\n                                                alignItems: \"center\",\n                                            }}>\n                                                {dateModifier(row.updated_at)}\n                                                <LongMenu onDelete={onDelete} onEdit={onEdit} data={row} />\n                                            </TableCell>\n                                        </TableRow>\n                                    );\n                                })}\n                        </TableBody>\n                    </Table>\n                </TableContainer>\n                <TablePagination\n                    rowsPerPageOptions={[10]}\n                    component=\"div\"\n                    count={rows.length}\n                    rowsPerPage={rowsPerPage}\n                    page={page}\n                    onChangePage={handleChangePage}\n                />\n            </Paper>\n            <EditModal \n                open={isModalVisible}\n                data={activeContact}\n                handleClose={() => {\n                    setModalVisibility(false)\n                    setActiveContact(null)\n                }}\n                handleSubmit={handleSubmit}\n            />\n            <div style={{position:\"fixed\", zIndex: 9999, bottom: 30, right: 30}}>\n                <Fab \n                    color=\"primary\" \n                    aria-label=\"add\"\n                    onClick={() => setModalVisibility(true)}\n                >\n                    <AddIcon />\n                </Fab>\n            </div>\n        </div>\n    );\n};\n\nexport default ContactsTable;"]},"metadata":{},"sourceType":"module"}