{"ast":null,"code":"import _toConsumableArray from\"/Users/karthikdechiraju/Developer/contacts/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/karthikdechiraju/Developer/contacts/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect}from\"react\";import{makeStyles}from\"@material-ui/core/styles\";import Table from\"@material-ui/core/Table\";import TableBody from\"@material-ui/core/TableBody\";import TableCell from\"@material-ui/core/TableCell\";import TableContainer from\"@material-ui/core/TableContainer\";import TablePagination from\"@material-ui/core/TablePagination\";import TableRow from\"@material-ui/core/TableRow\";import Paper from\"@material-ui/core/Paper\";import TableHeadComponent from\"../components/tableHead\";import{getContacts,createContact,updateContact,deleteContact}from'../utils/httpUtils';import{dateModifier}from\"../utils/dateModifier\";import LongMenu from'../components/floatingMenu';import EditModal from\"./modal\";import AddIcon from'@material-ui/icons/Add';import Fab from'@material-ui/core/Fab';import{Snackbar}from'../components/snackbar';function descendingComparator(a,b,orderBy){if(b[orderBy]<a[orderBy]){return-1;}if(b[orderBy]>a[orderBy]){return 1;}return 0;}function getComparator(order,orderBy){return order===\"desc\"?function(a,b){return descendingComparator(a,b,orderBy);}:function(a,b){return-descendingComparator(a,b,orderBy);};}function stableSort(array,comparator){var stabilizedThis=array.map(function(el,index){return[el,index];});stabilizedThis.sort(function(a,b){var order=comparator(a[0],b[0]);if(order!==0)return order;return a[1]-b[1];});return stabilizedThis.map(function(el){return el[0];});}var useStyles=makeStyles(function(theme){return{root:{width:\"100%\",marginBottom:100},paper:{width:\"100%\",marginBottom:theme.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:\"rect(0 0 0 0)\",height:1,margin:-1,overflow:\"hidden\",padding:0,position:\"absolute\",top:20,width:1}};});var rowsPerPage=10;var ContactsTable=function ContactsTable(props){var classes=useStyles();var _React$useState=React.useState(\"asc\"),_React$useState2=_slicedToArray(_React$useState,2),order=_React$useState2[0],setOrder=_React$useState2[1];var _React$useState3=React.useState(\"calories\"),_React$useState4=_slicedToArray(_React$useState3,2),orderBy=_React$useState4[0],setOrderBy=_React$useState4[1];var _React$useState5=React.useState(0),_React$useState6=_slicedToArray(_React$useState5,2),page=_React$useState6[0],setPage=_React$useState6[1];var _React$useState7=React.useState([]),_React$useState8=_slicedToArray(_React$useState7,2),rows=_React$useState8[0],setRows=_React$useState8[1];var _React$useState9=React.useState([]),_React$useState10=_slicedToArray(_React$useState9,2),data=_React$useState10[0],setData=_React$useState10[1];var _React$useState11=React.useState(false),_React$useState12=_slicedToArray(_React$useState11,2),isModalVisible=_React$useState12[0],setModalVisibility=_React$useState12[1];var _React$useState13=React.useState(null),_React$useState14=_slicedToArray(_React$useState13,2),activeContact=_React$useState14[0],setActiveContact=_React$useState14[1];var _React$useState15=React.useState({isError:false,message:\"\"}),_React$useState16=_slicedToArray(_React$useState15,2),error=_React$useState16[0],setError=_React$useState16[1];useEffect(function(){getContacts().then(function(res){setRows(res.data.data);setData(res.data.data);});},[]);useEffect(function(){if(props.search!==\"\"){var newRows=rows.filter(function(item){return item.name.includes(props.search)||item.email.includes(props.search);});setRows(newRows);}else{setRows(data);}},[props.search,data]);var handleRequestSort=function handleRequestSort(event,property){var isAsc=orderBy===property&&order===\"asc\";setOrder(isAsc?\"desc\":\"asc\");setOrderBy(property);};var handleChangePage=function handleChangePage(event,newPage){setPage(newPage);};var onEdit=function onEdit(data){setActiveContact(data);setModalVisibility(true);};var showSnackBar=function showSnackBar(isError,message){setError({isError:isError,message:message});setTimeout(function(){setError({isError:false,message:\"\"});},5000);};var onDelete=function onDelete(data){deleteContact(data._id).then(function(res){var newRows=rows.filter(function(item){return item._id!==data._id;});setRows(newRows);showSnackBar(false,\"contact deleted successfully\");}).catch(function(e){showSnackBar(true,e.response&&e.response.data&&e.response.data.error?e.response.data.error:\"Something went wrong\");});};var handleSubmit=function handleSubmit(data){if(activeContact){// update\nupdateContact(data).then(function(res){var newRows=rows.map(function(item){if(item._id===data._id){return res.data.data;}else{return item;}});setRows(newRows);setActiveContact(null);setModalVisibility(false);showSnackBar(false,\"contact updated successfully\");}).catch(function(e){setActiveContact(null);setModalVisibility(false);showSnackBar(true,e.response&&e.response.data&&e.response.data.error?e.response.data.error:\"Something went wrong\");});}else{// create\ncreateContact(data).then(function(res){var newRows=[res.data.data].concat(_toConsumableArray(rows));setRows(newRows);setActiveContact(null);setModalVisibility(false);showSnackBar(false,\"contact created successfully\");}).catch(function(e){showSnackBar(true,e.response&&e.response.data&&e.response.data.error?e.response.data.error:\"Something went wrong\");setActiveContact(null);setModalVisibility(false);});}};// const emptyRows = rowsPerPage - Math.min(rowsPerPage, rows.length - page * rowsPerPage);\nreturn/*#__PURE__*/React.createElement(\"div\",{className:classes.root},/*#__PURE__*/React.createElement(Snackbar,{isError:error.isError,message:error.message}),/*#__PURE__*/React.createElement(Paper,{className:classes.paper},/*#__PURE__*/React.createElement(TableContainer,null,/*#__PURE__*/React.createElement(Table,{className:classes.table,\"aria-labelledby\":\"tableTitle\",size:\"medium\",\"aria-label\":\"enhanced table\"},/*#__PURE__*/React.createElement(TableHeadComponent,{classes:classes,order:order,orderBy:orderBy,onRequestSort:handleRequestSort,rowCount:rows.length}),/*#__PURE__*/React.createElement(TableBody,null,stableSort(rows,getComparator(order,orderBy)).slice(page*rowsPerPage,page*rowsPerPage+rowsPerPage).map(function(row){return/*#__PURE__*/React.createElement(TableRow,{hover:true,tabIndex:-1,key:row.name},/*#__PURE__*/React.createElement(TableCell,null,row.name),/*#__PURE__*/React.createElement(TableCell,null,row.email),/*#__PURE__*/React.createElement(TableCell,null,row.country_code),/*#__PURE__*/React.createElement(TableCell,null,dateModifier(row.created_at)),/*#__PURE__*/React.createElement(TableCell,{style:{display:\"flex\",flexDirection:\"row\",justifyContent:\"space-between\",alignItems:\"center\"}},dateModifier(row.updated_at),/*#__PURE__*/React.createElement(LongMenu,{onDelete:onDelete,onEdit:onEdit,data:row})));})))),/*#__PURE__*/React.createElement(TablePagination,{rowsPerPageOptions:[10],component:\"div\",count:rows.length,rowsPerPage:rowsPerPage,page:page,onChangePage:handleChangePage})),/*#__PURE__*/React.createElement(EditModal,{open:isModalVisible,data:activeContact,handleClose:function handleClose(){setModalVisibility(false);setActiveContact(null);},handleSubmit:handleSubmit}),/*#__PURE__*/React.createElement(\"div\",{style:{position:\"fixed\",zIndex:9999,bottom:30,right:30}},/*#__PURE__*/React.createElement(Fab,{color:\"primary\",\"aria-label\":\"add\",onClick:function onClick(){return setModalVisibility(true);}},/*#__PURE__*/React.createElement(AddIcon,null))));};export default ContactsTable;","map":{"version":3,"sources":["/Users/karthikdechiraju/Developer/contacts/client/src/components/table.js"],"names":["React","useEffect","makeStyles","Table","TableBody","TableCell","TableContainer","TablePagination","TableRow","Paper","TableHeadComponent","getContacts","createContact","updateContact","deleteContact","dateModifier","LongMenu","EditModal","AddIcon","Fab","Snackbar","descendingComparator","a","b","orderBy","getComparator","order","stableSort","array","comparator","stabilizedThis","map","el","index","sort","useStyles","theme","root","width","marginBottom","paper","spacing","table","minWidth","visuallyHidden","border","clip","height","margin","overflow","padding","position","top","rowsPerPage","ContactsTable","props","classes","useState","setOrder","setOrderBy","page","setPage","rows","setRows","data","setData","isModalVisible","setModalVisibility","activeContact","setActiveContact","isError","message","error","setError","then","res","search","newRows","filter","item","name","includes","email","handleRequestSort","event","property","isAsc","handleChangePage","newPage","onEdit","showSnackBar","setTimeout","onDelete","_id","catch","e","response","handleSubmit","length","slice","row","country_code","created_at","display","flexDirection","justifyContent","alignItems","updated_at","zIndex","bottom","right"],"mappings":"wVAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,UAAT,KAA2B,0BAA3B,CACA,MAAOC,CAAAA,KAAP,KAAkB,yBAAlB,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,CACA,MAAOC,CAAAA,cAAP,KAA2B,kCAA3B,CACA,MAAOC,CAAAA,eAAP,KAA4B,mCAA5B,CACA,MAAOC,CAAAA,QAAP,KAAqB,4BAArB,CACA,MAAOC,CAAAA,KAAP,KAAkB,yBAAlB,CACA,MAAOC,CAAAA,kBAAP,KAA+B,yBAA/B,CACA,OAASC,WAAT,CAAsBC,aAAtB,CAAqCC,aAArC,CAAoDC,aAApD,KAAyE,oBAAzE,CACA,OAASC,YAAT,KAA6B,uBAA7B,CACA,MAAOC,CAAAA,QAAP,KAAqB,4BAArB,CACA,MAAOC,CAAAA,SAAP,KAAsB,SAAtB,CACA,MAAOC,CAAAA,OAAP,KAAoB,wBAApB,CACA,MAAOC,CAAAA,GAAP,KAAgB,uBAAhB,CACA,OAASC,QAAT,KAAyB,wBAAzB,CAKA,QAASC,CAAAA,oBAAT,CAA8BC,CAA9B,CAAiCC,CAAjC,CAAoCC,OAApC,CAA6C,CACzC,GAAID,CAAC,CAACC,OAAD,CAAD,CAAaF,CAAC,CAACE,OAAD,CAAlB,CAA6B,CACzB,MAAO,CAAC,CAAR,CACH,CACD,GAAID,CAAC,CAACC,OAAD,CAAD,CAAaF,CAAC,CAACE,OAAD,CAAlB,CAA6B,CACzB,MAAO,EAAP,CACH,CACD,MAAO,EAAP,CACH,CAED,QAASC,CAAAA,aAAT,CAAuBC,KAAvB,CAA8BF,OAA9B,CAAuC,CACnC,MAAOE,CAAAA,KAAK,GAAK,MAAV,CAAmB,SAACJ,CAAD,CAAIC,CAAJ,QAAUF,CAAAA,oBAAoB,CAACC,CAAD,CAAIC,CAAJ,CAAOC,OAAP,CAA9B,EAAnB,CAAmE,SAACF,CAAD,CAAIC,CAAJ,QAAU,CAACF,oBAAoB,CAACC,CAAD,CAAIC,CAAJ,CAAOC,OAAP,CAA/B,EAA1E,CACH,CAED,QAASG,CAAAA,UAAT,CAAoBC,KAApB,CAA2BC,UAA3B,CAAuC,CACnC,GAAMC,CAAAA,cAAc,CAAGF,KAAK,CAACG,GAAN,CAAU,SAACC,EAAD,CAAKC,KAAL,QAAe,CAACD,EAAD,CAAKC,KAAL,CAAf,EAAV,CAAvB,CACAH,cAAc,CAACI,IAAf,CAAoB,SAACZ,CAAD,CAAIC,CAAJ,CAAU,CAC1B,GAAMG,CAAAA,KAAK,CAAGG,UAAU,CAACP,CAAC,CAAC,CAAD,CAAF,CAAOC,CAAC,CAAC,CAAD,CAAR,CAAxB,CACA,GAAIG,KAAK,GAAK,CAAd,CAAiB,MAAOA,CAAAA,KAAP,CACjB,MAAOJ,CAAAA,CAAC,CAAC,CAAD,CAAD,CAAOC,CAAC,CAAC,CAAD,CAAf,CACH,CAJD,EAKA,MAAOO,CAAAA,cAAc,CAACC,GAAf,CAAmB,SAACC,EAAD,QAAQA,CAAAA,EAAE,CAAC,CAAD,CAAV,EAAnB,CAAP,CACH,CAED,GAAMG,CAAAA,SAAS,CAAGjC,UAAU,CAAC,SAACkC,KAAD,QAAY,CACrCC,IAAI,CAAE,CACFC,KAAK,CAAE,MADL,CAEFC,YAAY,CAAE,GAFZ,CAD+B,CAKrCC,KAAK,CAAE,CACHF,KAAK,CAAE,MADJ,CAEHC,YAAY,CAAEH,KAAK,CAACK,OAAN,CAAc,CAAd,CAFX,CAL8B,CASrCC,KAAK,CAAE,CACHC,QAAQ,CAAE,GADP,CAT8B,CAYrCC,cAAc,CAAE,CACZC,MAAM,CAAE,CADI,CAEZC,IAAI,CAAE,eAFM,CAGZC,MAAM,CAAE,CAHI,CAIZC,MAAM,CAAE,CAAC,CAJG,CAKZC,QAAQ,CAAE,QALE,CAMZC,OAAO,CAAE,CANG,CAOZC,QAAQ,CAAE,UAPE,CAQZC,GAAG,CAAE,EARO,CASZd,KAAK,CAAE,CATK,CAZqB,CAAZ,EAAD,CAA5B,CAyBA,GAAMe,CAAAA,WAAW,CAAG,EAApB,CAEA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,KAAD,CAAW,CAE7B,GAAMC,CAAAA,OAAO,CAAGrB,SAAS,EAAzB,CAF6B,oBAGHnC,KAAK,CAACyD,QAAN,CAAe,KAAf,CAHG,oDAGtB/B,KAHsB,qBAGfgC,QAHe,0CAIC1D,KAAK,CAACyD,QAAN,CAAe,UAAf,CAJD,qDAItBjC,OAJsB,qBAIbmC,UAJa,0CAKL3D,KAAK,CAACyD,QAAN,CAAe,CAAf,CALK,qDAKtBG,IALsB,qBAKhBC,OALgB,0CAML7D,KAAK,CAACyD,QAAN,CAAe,EAAf,CANK,qDAMtBK,IANsB,qBAMhBC,OANgB,0CAOL/D,KAAK,CAACyD,QAAN,CAAe,EAAf,CAPK,sDAOtBO,IAPsB,sBAOhBC,OAPgB,4CAQgBjE,KAAK,CAACyD,QAAN,CAAe,KAAf,CARhB,uDAQtBS,cARsB,sBAQNC,kBARM,4CASanE,KAAK,CAACyD,QAAN,CAAe,IAAf,CATb,uDAStBW,aATsB,sBASPC,gBATO,4CAUHrE,KAAK,CAACyD,QAAN,CAAe,CACrCa,OAAO,CAAE,KAD4B,CAErCC,OAAO,CAAE,EAF4B,CAAf,CAVG,uDAUtBC,KAVsB,sBAUfC,QAVe,sBAgB7BxE,SAAS,CAAC,UAAM,CACZU,WAAW,GAAG+D,IAAd,CAAmB,SAAAC,GAAG,CAAI,CACtBZ,OAAO,CAACY,GAAG,CAACX,IAAJ,CAASA,IAAV,CAAP,CACAC,OAAO,CAACU,GAAG,CAACX,IAAJ,CAASA,IAAV,CAAP,CACH,CAHD,EAIH,CALQ,CAKP,EALO,CAAT,CAOA/D,SAAS,CAAC,UAAI,CACV,GAAGsD,KAAK,CAACqB,MAAN,GAAiB,EAApB,CAAuB,CACnB,GAAIC,CAAAA,OAAO,CAAGf,IAAI,CAACgB,MAAL,CAAY,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACC,IAAL,CAAUC,QAAV,CAAmB1B,KAAK,CAACqB,MAAzB,GAAoCG,IAAI,CAACG,KAAL,CAAWD,QAAX,CAAoB1B,KAAK,CAACqB,MAA1B,CAAxC,EAAhB,CAAd,CACAb,OAAO,CAACc,OAAD,CAAP,CACH,CAHD,IAGK,CACDd,OAAO,CAACC,IAAD,CAAP,CACH,CACJ,CAPQ,CAOP,CAACT,KAAK,CAACqB,MAAP,CAAcZ,IAAd,CAPO,CAAT,CASA,GAAMmB,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACC,KAAD,CAAQC,QAAR,CAAqB,CAC3C,GAAMC,CAAAA,KAAK,CAAG9D,OAAO,GAAK6D,QAAZ,EAAwB3D,KAAK,GAAK,KAAhD,CACAgC,QAAQ,CAAC4B,KAAK,CAAG,MAAH,CAAY,KAAlB,CAAR,CACA3B,UAAU,CAAC0B,QAAD,CAAV,CACH,CAJD,CAOA,GAAME,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACH,KAAD,CAAQI,OAAR,CAAoB,CACzC3B,OAAO,CAAC2B,OAAD,CAAP,CACH,CAFD,CAIA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAACzB,IAAD,CAAU,CACrBK,gBAAgB,CAACL,IAAD,CAAhB,CACAG,kBAAkB,CAAC,IAAD,CAAlB,CACH,CAHD,CAMA,GAAMuB,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACpB,OAAD,CAAUC,OAAV,CAAsB,CACvCE,QAAQ,CAAC,CACLH,OAAO,CAAPA,OADK,CAELC,OAAO,CAAPA,OAFK,CAAD,CAAR,CAIAoB,UAAU,CAAC,UAAI,CACXlB,QAAQ,CAAC,CACLH,OAAO,CAAE,KADJ,CAELC,OAAO,CAAE,EAFJ,CAAD,CAAR,CAIH,CALS,CAKR,IALQ,CAAV,CAMH,CAXD,CAaA,GAAMqB,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAAC5B,IAAD,CAAU,CACvBlD,aAAa,CAACkD,IAAI,CAAC6B,GAAN,CAAb,CAAwBnB,IAAxB,CAA6B,SAAAC,GAAG,CAAE,CAC9B,GAAIE,CAAAA,OAAO,CAAGf,IAAI,CAACgB,MAAL,CAAY,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACc,GAAL,GAAa7B,IAAI,CAAC6B,GAAtB,EAAhB,CAAd,CACA9B,OAAO,CAACc,OAAD,CAAP,CACAa,YAAY,CAAC,KAAD,CAAO,8BAAP,CAAZ,CACH,CAJD,EAIGI,KAJH,CAIS,SAAAC,CAAC,CAAG,CACTL,YAAY,CAAC,IAAD,CAAMK,CAAC,CAACC,QAAF,EAAcD,CAAC,CAACC,QAAF,CAAWhC,IAAzB,EAAiC+B,CAAC,CAACC,QAAF,CAAWhC,IAAX,CAAgBQ,KAAjD,CAAyDuB,CAAC,CAACC,QAAF,CAAWhC,IAAX,CAAgBQ,KAAzE,CAAiF,sBAAvF,CAAZ,CACH,CAND,EAOH,CARD,CAWA,GAAMyB,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACjC,IAAD,CAAU,CAC3B,GAAGI,aAAH,CAAiB,CACb;AACAvD,aAAa,CAACmD,IAAD,CAAb,CAAoBU,IAApB,CAAyB,SAAAC,GAAG,CAAI,CAC5B,GAAIE,CAAAA,OAAO,CAAGf,IAAI,CAAC/B,GAAL,CAAS,SAAAgD,IAAI,CAAI,CAC3B,GAAGA,IAAI,CAACc,GAAL,GAAa7B,IAAI,CAAC6B,GAArB,CAAyB,CACrB,MAAOlB,CAAAA,GAAG,CAACX,IAAJ,CAASA,IAAhB,CACH,CAFD,IAEK,CACD,MAAOe,CAAAA,IAAP,CACH,CACJ,CANa,CAAd,CAOAhB,OAAO,CAACc,OAAD,CAAP,CACAR,gBAAgB,CAAC,IAAD,CAAhB,CACAF,kBAAkB,CAAC,KAAD,CAAlB,CACAuB,YAAY,CAAC,KAAD,CAAO,8BAAP,CAAZ,CACH,CAZD,EAYGI,KAZH,CAYS,SAAAC,CAAC,CAAI,CACV1B,gBAAgB,CAAC,IAAD,CAAhB,CACAF,kBAAkB,CAAC,KAAD,CAAlB,CACAuB,YAAY,CAAC,IAAD,CAAMK,CAAC,CAACC,QAAF,EAAcD,CAAC,CAACC,QAAF,CAAWhC,IAAzB,EAAiC+B,CAAC,CAACC,QAAF,CAAWhC,IAAX,CAAgBQ,KAAjD,CAAyDuB,CAAC,CAACC,QAAF,CAAWhC,IAAX,CAAgBQ,KAAzE,CAAiF,sBAAvF,CAAZ,CACH,CAhBD,EAiBH,CAnBD,IAmBK,CACD;AACA5D,aAAa,CAACoD,IAAD,CAAb,CAAoBU,IAApB,CAAyB,SAAAC,GAAG,CAAI,CAC5B,GAAIE,CAAAA,OAAO,EAAIF,GAAG,CAACX,IAAJ,CAASA,IAAb,4BAAqBF,IAArB,EAAX,CACAC,OAAO,CAACc,OAAD,CAAP,CACAR,gBAAgB,CAAC,IAAD,CAAhB,CACAF,kBAAkB,CAAC,KAAD,CAAlB,CACAuB,YAAY,CAAC,KAAD,CAAO,8BAAP,CAAZ,CACH,CAND,EAMGI,KANH,CAMS,SAAAC,CAAC,CAAI,CACVL,YAAY,CAAC,IAAD,CAAMK,CAAC,CAACC,QAAF,EAAcD,CAAC,CAACC,QAAF,CAAWhC,IAAzB,EAAiC+B,CAAC,CAACC,QAAF,CAAWhC,IAAX,CAAgBQ,KAAjD,CAAyDuB,CAAC,CAACC,QAAF,CAAWhC,IAAX,CAAgBQ,KAAzE,CAAiF,sBAAvF,CAAZ,CACAH,gBAAgB,CAAC,IAAD,CAAhB,CACAF,kBAAkB,CAAC,KAAD,CAAlB,CACH,CAVD,EAWH,CACJ,CAlCD,CAmCA;AACA,mBACI,2BAAK,SAAS,CAAEX,OAAO,CAACnB,IAAxB,eACI,oBAAC,QAAD,EAAU,OAAO,CAAEmC,KAAK,CAACF,OAAzB,CAAkC,OAAO,CAAEE,KAAK,CAACD,OAAjD,EADJ,cAEI,oBAAC,KAAD,EAAO,SAAS,CAAEf,OAAO,CAAChB,KAA1B,eACI,oBAAC,cAAD,mBACI,oBAAC,KAAD,EACI,SAAS,CAAEgB,OAAO,CAACd,KADvB,CAEI,kBAAgB,YAFpB,CAGI,IAAI,CAAE,QAHV,CAII,aAAW,gBAJf,eAMI,oBAAC,kBAAD,EACI,OAAO,CAAEc,OADb,CAEI,KAAK,CAAE9B,KAFX,CAGI,OAAO,CAAEF,OAHb,CAII,aAAa,CAAE2D,iBAJnB,CAKI,QAAQ,CAAErB,IAAI,CAACoC,MALnB,EANJ,cAaI,oBAAC,SAAD,MACKvE,UAAU,CAACmC,IAAD,CAAOrC,aAAa,CAACC,KAAD,CAAQF,OAAR,CAApB,CAAV,CACI2E,KADJ,CACWvC,IAAI,CAAGP,WADlB,CAC+BO,IAAI,CAAGP,WAAP,CAAqBA,WADpD,EAEItB,GAFJ,CAEQ,SAAAqE,GAAG,CAAI,CACR,mBACI,oBAAC,QAAD,EAAU,KAAK,KAAf,CAAgB,QAAQ,CAAE,CAAC,CAA3B,CAA8B,GAAG,CAAEA,GAAG,CAACpB,IAAvC,eACI,oBAAC,SAAD,MAAYoB,GAAG,CAACpB,IAAhB,CADJ,cAEI,oBAAC,SAAD,MAAYoB,GAAG,CAAClB,KAAhB,CAFJ,cAGI,oBAAC,SAAD,MAAakB,GAAG,CAACC,YAAjB,CAHJ,cAII,oBAAC,SAAD,MAAatF,YAAY,CAACqF,GAAG,CAACE,UAAL,CAAzB,CAJJ,cAKI,oBAAC,SAAD,EAAW,KAAK,CAAE,CACdC,OAAO,CAAE,MADK,CAEdC,aAAa,CAAE,KAFD,CAGdC,cAAc,CAAE,eAHF,CAIdC,UAAU,CAAE,QAJE,CAAlB,EAMK3F,YAAY,CAACqF,GAAG,CAACO,UAAL,CANjB,cAOI,oBAAC,QAAD,EAAU,QAAQ,CAAEf,QAApB,CAA8B,MAAM,CAAEH,MAAtC,CAA8C,IAAI,CAAEW,GAApD,EAPJ,CALJ,CADJ,CAiBH,CApBJ,CADL,CAbJ,CADJ,CADJ,cAwCI,oBAAC,eAAD,EACI,kBAAkB,CAAE,CAAC,EAAD,CADxB,CAEI,SAAS,CAAC,KAFd,CAGI,KAAK,CAAEtC,IAAI,CAACoC,MAHhB,CAII,WAAW,CAAE7C,WAJjB,CAKI,IAAI,CAAEO,IALV,CAMI,YAAY,CAAE2B,gBANlB,EAxCJ,CAFJ,cAmDI,oBAAC,SAAD,EACI,IAAI,CAAErB,cADV,CAEI,IAAI,CAAEE,aAFV,CAGI,WAAW,CAAE,sBAAM,CACfD,kBAAkB,CAAC,KAAD,CAAlB,CACAE,gBAAgB,CAAC,IAAD,CAAhB,CACH,CANL,CAOI,YAAY,CAAE4B,YAPlB,EAnDJ,cA4DI,2BAAK,KAAK,CAAE,CAAC9C,QAAQ,CAAC,OAAV,CAAmByD,MAAM,CAAE,IAA3B,CAAiCC,MAAM,CAAE,EAAzC,CAA6CC,KAAK,CAAE,EAApD,CAAZ,eACI,oBAAC,GAAD,EACI,KAAK,CAAC,SADV,CAEI,aAAW,KAFf,CAGI,OAAO,CAAE,yBAAM3C,CAAAA,kBAAkB,CAAC,IAAD,CAAxB,EAHb,eAKI,oBAAC,OAAD,MALJ,CADJ,CA5DJ,CADJ,CAwEH,CArLD,CAuLA,cAAeb,CAAAA,aAAf","sourcesContent":["import React, { useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableContainer from \"@material-ui/core/TableContainer\";\nimport TablePagination from \"@material-ui/core/TablePagination\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Paper from \"@material-ui/core/Paper\";\nimport TableHeadComponent from \"../components/tableHead\";\nimport { getContacts, createContact, updateContact, deleteContact } from '../utils/httpUtils'\nimport { dateModifier } from \"../utils/dateModifier\";\nimport LongMenu from '../components/floatingMenu'\nimport EditModal from \"./modal\";\nimport AddIcon from '@material-ui/icons/Add';\nimport Fab from '@material-ui/core/Fab';\nimport { Snackbar } from '../components/snackbar'\n\n\n\n\nfunction descendingComparator(a, b, orderBy) {\n    if (b[orderBy] < a[orderBy]) {\n        return -1;\n    }\n    if (b[orderBy] > a[orderBy]) {\n        return 1;\n    }\n    return 0;\n}\n\nfunction getComparator(order, orderBy) {\n    return order === \"desc\" ? (a, b) => descendingComparator(a, b, orderBy) : (a, b) => -descendingComparator(a, b, orderBy);\n}\n\nfunction stableSort(array, comparator) {\n    const stabilizedThis = array.map((el, index) => [el, index]);\n    stabilizedThis.sort((a, b) => {\n        const order = comparator(a[0], b[0]);\n        if (order !== 0) return order;\n        return a[1] - b[1];\n    });\n    return stabilizedThis.map((el) => el[0]);\n}\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: \"100%\",\n        marginBottom: 100\n    },\n    paper: {\n        width: \"100%\",\n        marginBottom: theme.spacing(2),\n    },\n    table: {\n        minWidth: 750,\n    },\n    visuallyHidden: {\n        border: 0,\n        clip: \"rect(0 0 0 0)\",\n        height: 1,\n        margin: -1,\n        overflow: \"hidden\",\n        padding: 0,\n        position: \"absolute\",\n        top: 20,\n        width: 1,\n    },\n}));\n\nconst rowsPerPage = 10\n\nconst ContactsTable = (props) => {\n    \n    const classes = useStyles();\n    const [order, setOrder] = React.useState(\"asc\");\n    const [orderBy, setOrderBy] = React.useState(\"calories\");\n    const [page, setPage] = React.useState(0);\n    const [rows, setRows] = React.useState([])\n    const [data, setData] = React.useState([])\n    const [isModalVisible, setModalVisibility] = React.useState(false)\n    const [activeContact, setActiveContact] = React.useState(null)\n    const [error, setError] = React.useState({\n        isError: false,\n        message: \"\"\n    })\n    \n    \n    useEffect(() => {\n        getContacts().then(res => {\n            setRows(res.data.data)\n            setData(res.data.data)\n        })\n    },[]);\n\n    useEffect(()=>{\n        if(props.search !== \"\"){\n            let newRows = rows.filter(item => item.name.includes(props.search) || item.email.includes(props.search))\n            setRows(newRows)\n        }else{\n            setRows(data)\n        }\n    },[props.search,data])\n\n    const handleRequestSort = (event, property) => {\n        const isAsc = orderBy === property && order === \"asc\";\n        setOrder(isAsc ? \"desc\" : \"asc\");\n        setOrderBy(property);\n    };\n\n\n    const handleChangePage = (event, newPage) => {\n        setPage(newPage);\n    };\n\n    const onEdit = (data) => {\n        setActiveContact(data)\n        setModalVisibility(true)\n    }\n\n\n    const showSnackBar = (isError, message) => {\n        setError({\n            isError,\n            message\n        })\n        setTimeout(()=>{\n            setError({\n                isError: false,\n                message: \"\"\n            })\n        },5000)\n    }\n\n    const onDelete = (data) => {\n        deleteContact(data._id).then(res=>{\n            let newRows = rows.filter(item => item._id !== data._id)\n            setRows(newRows)\n            showSnackBar(false,\"contact deleted successfully\")\n        }).catch(e =>{\n            showSnackBar(true,e.response && e.response.data && e.response.data.error ? e.response.data.error : \"Something went wrong\")\n        })\n    }\n\n\n    const handleSubmit = (data) => {\n        if(activeContact){\n            // update\n            updateContact(data).then(res => {\n                let newRows = rows.map(item => {\n                    if(item._id === data._id){\n                        return res.data.data\n                    }else{\n                        return item\n                    }\n                })\n                setRows(newRows)\n                setActiveContact(null)\n                setModalVisibility(false)\n                showSnackBar(false,\"contact updated successfully\")\n            }).catch(e => {\n                setActiveContact(null)\n                setModalVisibility(false)\n                showSnackBar(true,e.response && e.response.data && e.response.data.error ? e.response.data.error : \"Something went wrong\")\n            })\n        }else{\n            // create\n            createContact(data).then(res => {\n                let newRows = [res.data.data,...rows]\n                setRows(newRows)\n                setActiveContact(null)\n                setModalVisibility(false)\n                showSnackBar(false,\"contact created successfully\")\n            }).catch(e => {\n                showSnackBar(true,e.response && e.response.data && e.response.data.error ? e.response.data.error : \"Something went wrong\")\n                setActiveContact(null)\n                setModalVisibility(false)\n            })\n        }\n    }\n    // const emptyRows = rowsPerPage - Math.min(rowsPerPage, rows.length - page * rowsPerPage);\n    return (\n        <div className={classes.root}>\n            <Snackbar isError={error.isError} message={error.message} />\n            <Paper className={classes.paper}>\n                <TableContainer>\n                    <Table\n                        className={classes.table}\n                        aria-labelledby=\"tableTitle\"\n                        size={\"medium\"}\n                        aria-label=\"enhanced table\"\n                    >\n                        <TableHeadComponent\n                            classes={classes}\n                            order={order}\n                            orderBy={orderBy}\n                            onRequestSort={handleRequestSort}\n                            rowCount={rows.length}\n                        />\n                        <TableBody>\n                            {stableSort(rows, getComparator(order, orderBy))\n                                .slice( page * rowsPerPage, page * rowsPerPage + rowsPerPage )\n                                .map(row => {\n                                    return (\n                                        <TableRow hover tabIndex={-1} key={row.name} >\n                                            <TableCell>{row.name}</TableCell>\n                                            <TableCell>{row.email}</TableCell>\n                                            <TableCell >{row.country_code}</TableCell>\n                                            <TableCell >{dateModifier(row.created_at)}</TableCell>\n                                            <TableCell style={{\n                                                display: \"flex\",\n                                                flexDirection: \"row\",\n                                                justifyContent: \"space-between\",\n                                                alignItems: \"center\",\n                                            }}>\n                                                {dateModifier(row.updated_at)}\n                                                <LongMenu onDelete={onDelete} onEdit={onEdit} data={row} />\n                                            </TableCell>\n                                        </TableRow>\n                                    );\n                                })}\n                        </TableBody>\n                    </Table>\n                </TableContainer>\n                <TablePagination\n                    rowsPerPageOptions={[10]}\n                    component=\"div\"\n                    count={rows.length}\n                    rowsPerPage={rowsPerPage}\n                    page={page}\n                    onChangePage={handleChangePage}\n                />\n            </Paper>\n            <EditModal \n                open={isModalVisible}\n                data={activeContact}\n                handleClose={() => {\n                    setModalVisibility(false)\n                    setActiveContact(null)\n                }}\n                handleSubmit={handleSubmit}\n            />\n            <div style={{position:\"fixed\", zIndex: 9999, bottom: 30, right: 30}}>\n                <Fab \n                    color=\"primary\" \n                    aria-label=\"add\"\n                    onClick={() => setModalVisibility(true)}\n                >\n                    <AddIcon />\n                </Fab>\n            </div>\n        </div>\n    );\n};\n\nexport default ContactsTable;"]},"metadata":{},"sourceType":"module"}